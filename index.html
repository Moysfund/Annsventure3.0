<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Annâ€™s Ventures â€” Shop</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --pink:#ff5f9a; --pink2:#ff84b2; --rose:#7a2a56; --border:#f4c2d8; --pill:#ffe4ef;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Poppins',sans-serif;background:#fff;color:#2a2a2a}
    /* Top banners */
    .notice{background:linear-gradient(90deg,var(--pink),var(--pink2));color:#fff;text-align:center;padding:10px;font-weight:600}
    .contact{background:#fff;border-bottom:1px solid var(--border);color:#7a2a56;text-align:center;padding:8px;font-size:14px}
    .contact a{color:#7a2a56;text-decoration:none;font-weight:600}
    /* Layout */
    .wrap{max-width:1100px;margin:0 auto;padding:20px}
    .title{font-family:'Playfair Display',serif;color:var(--rose);margin:0 0 16px}
    /* Products grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px}
    .product{border:1px solid var(--border);border-radius:14px;padding:12px;background:#fff;box-shadow:0 4px 12px rgba(255,95,154,.08)}
    .product img{width:100%;height:180px;object-fit:cover;border-radius:12px}
    .pill{background:var(--pill);border:1px solid #f3a6c6;border-radius:999px;padding:4px 10px;font-size:12px;color:#8b3b64;display:inline-block;margin-top:6px}
    .price{font-weight:700;color:var(--pink);margin-top:6px}
    .desc{margin-top:6px;font-size:13px;color:#444}
    .actions{display:flex;gap:10px;margin-top:10px}
    .btn{padding:8px 12px;border:none;border-radius:10px;background:linear-gradient(90deg,var(--pink),var(--pink2));color:#fff;font-weight:600;cursor:pointer}
    .btn.ghost{background:#fff;color:var(--rose);border:1px solid #f3a6c6}
    /* Promo/info strip */
    .info-strip{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin:18px 0}
    .info-card{border:1px solid var(--border);border-radius:12px;padding:12px;background:#fff}
    .info-card h4{margin:0 0 6px;color:var(--rose)}
    .info-card p{margin:0;color:#444;font-size:14px}
    /* Modal checkout */
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.55);align-items:center;justify-content:center;padding:16px}
    .modal-content{background:#fff;padding:20px;border-radius:14px;max-width:460px;width:100%}
    .modal-content h2{margin-top:0;color:var(--rose)}
    .cart-list{border:1px solid var(--border);border-radius:12px;padding:10px;max-height:200px;overflow:auto}
    .cart-item{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px dashed #f3d0de}
    .cart-item:last-child{border-bottom:none}
    .cart-item .title{font-family:'Poppins',sans-serif;color:#333;font-size:14px;margin:0}
    .cart-remove{border:none;background:#fff;color:#a33;cursor:pointer;font-weight:600}
    .total{font-weight:700;color:var(--pink);margin:10px 0}
    .modal-content input,.modal-content textarea{width:100%;padding:10px;margin-bottom:10px;border:1px solid #f1c1d7;border-radius:8px;font-family:inherit}
    .modal-actions{display:flex;gap:10px}
    /* Footer */
    footer{margin-top:30px;padding:20px;text-align:center;color:#666;font-size:13px;border-top:1px solid var(--border)}
  </style>
</head>
<body>
  <!-- Nationwide Delivery banner -->
  <div class="notice">ðŸšš Nationwide Delivery Available â€” Order today and get it fast!</div>
  <!-- Contact strip -->
  <div class="contact">
    Need help? Email <a href="mailto:hannahadaja63@gmail.com">hannahadaja63@gmail.com</a> or call <a href="tel:+2349046588565">+234 904 658 8565</a>
  </div>

  <div class="wrap">
    <h1 class="title">Annâ€™s Ventures â€” Shop</h1>

    <!-- Info highlights -->
    <div class="info-strip">
      <div class="info-card">
        <h4>Fast delivery</h4>
        <p>We deliver nationwide. Reliable dispatch to your doorstep.</p>
      </div>
      <div class="info-card">
        <h4>Quality guaranteed</h4>
        <p>Curated products for wear and drink categories â€” fresh, authentic, and stylish.</p>
      </div>
      <div class="info-card">
        <h4>Easy checkout</h4>
        <p>Add to cart and complete your order in seconds with our simple popâ€‘up checkout.</p>
      </div>
    </div>

    <!-- Products -->
    <div id="products" class="grid"></div>
  </div>

  <!-- Checkout Modal -->
  <div id="checkoutModal" class="modal">
    <div class="modal-content">
      <h2>Checkout</h2>

      <!-- Cart items -->
      <div class="cart-list" id="cart-items"></div>
      <div class="total" id="cart-total">Total: â‚¦0</div>

      <!-- Customer details -->
      <input id="custName" type="text" placeholder="Full Name">
      <input id="custEmail" type="email" placeholder="Email">
      <input id="custPhone" type="text" placeholder="Phone">
      <textarea id="custAddress" placeholder="Delivery Address"></textarea>

      <!-- Actions -->
      <div class="modal-actions">
        <button id="placeOrderBtn" class="btn">Place Order</button>
        <button id="closeModalBtn" class="btn ghost">Cancel</button>
      </div>
    </div>
  </div>

  <footer>
    Â© Annâ€™s Ventures â€” All rights reserved
  </footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  // Firebase config (same project as your admin)
  const firebaseConfig = {
    apiKey: "AIzaSyDeuEMpCf90Y8P5M0Xahwi_zMeHZeqod-Q",
    authDomain: "annsventure-51957.firebaseapp.com",
    projectId: "annsventure-51957",
    storageBucket: "annsventure-51957.appspot.com",
    messagingSenderId: "1054919145056",
    appId: "1:1054919145056:web:64c35fc1507000984b3505",
    measurementId: "G-SSN8TYCRWQ"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Elements
  const productList = document.getElementById('products');
  const checkoutModal = document.getElementById('checkoutModal');
  const cartItemsEl = document.getElementById('cart-items');
  const cartTotalEl = document.getElementById('cart-total');
  const placeOrderBtn = document.getElementById('placeOrderBtn');
  const closeModalBtn = document.getElementById('closeModalBtn');

  // Cart state
  let cart = [];

  // Render cart
  function updateCart(){
    cartItemsEl.innerHTML = '';
    let total = 0;

    cart.forEach((item, index)=>{
      total += parseFloat(item.price) || 0;
      const row = document.createElement('div');
      row.className = 'cart-item';
      row.innerHTML = `
        <span class="title">${item.title} â€” â‚¦${item.price}</span>
        <button class="cart-remove" data-index="${index}">Remove</button>
      `;
      row.querySelector('.cart-remove').addEventListener('click', ()=>{
        cart.splice(index,1);
        updateCart();
      });
      cartItemsEl.appendChild(row);
    });

    cartTotalEl.textContent = 'Total: â‚¦' + total;
  }

  // Live products from Firestore
  const q = query(collection(db, "products"), orderBy("createdAt", "desc"));
  onSnapshot(q, (snapshot)=>{
    productList.innerHTML = '';
    snapshot.forEach(docSnap=>{
      const p = docSnap.data();
      const card = document.createElement('div');
      card.className = 'product';
      card.innerHTML = `
        <img src="${p.image || ''}" alt="${p.title || ''}">
        <h3 class="title" style="font-size:18px;margin:8px 0;color:${'#7a2a56'}">${p.title || ''}</h3>
        <span class="pill">${p.category || ''}</span>
        <div class="price">â‚¦${p.price || 0}</div>
        <div class="desc">${p.description || ''}</div>
        <div class="actions">
          <button class="btn add">Add to Cart</button>
          <button class="btn ghost details">Details</button>
        </div>
      `;
      // Add to cart opens modal
      card.querySelector('.add').addEventListener('click', ()=>{
        cart.push(p);
        updateCart();
        checkoutModal.style.display = 'flex';
      });
      // Optional "Details" behavior: open modal with just this item in cart
      card.querySelector('.details').addEventListener('click', ()=>{
        cart = [p];
        updateCart();
        checkoutModal.style.display = 'flex';
      });

      productList.appendChild(card);
    });
  });

  // Place order
  placeOrderBtn.addEventListener('click', async ()=>{
    if(cart.length === 0){ alert("Cart is empty"); return; }
    const name = document.getElementById('custName').value.trim();
    const email = document.getElementById('custEmail').value.trim();
    const phone = document.getElementById('custPhone').value.trim();
    const address = document.getElementById('custAddress').value.trim();
    if(!name || !email || !phone || !address){ alert("Fill all fields"); return; }

    const total = cart.reduce((sum,i)=>sum + (parseFloat(i.price) || 0), 0);

    await addDoc(collection(db,"orders"),{
      customer: { name, email, phone, address },
      items: cart,
      total,
      createdAt: serverTimestamp()
    });

    // Reset and go to thank-you page
    cart = [];
    updateCart();
    checkoutModal.style.display = 'none';
    window.location.href = "thankyou.html";
  });

  // Close modal
  closeModalBtn.addEventListener('click', ()=>{
    checkoutModal.style.display = 'none';
  });

  // Close modal on backdrop click
  checkoutModal.addEventListener('click', (e)=>{
    if(e.target === checkoutModal){ checkoutModal.style.display = 'none'; }
  });
</script>
</body>
</html>
